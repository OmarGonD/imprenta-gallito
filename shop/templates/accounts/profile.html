{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="profile-body py-10 min-h-screen bg-slate-50">
    <div class="container mx-auto px-4 max-w-4xl">
        <div class="glass-card overflow-hidden">
            <!-- Header Section -->
            <div class="profile-header p-8 text-center text-white relative h-56 flex flex-col items-center justify-center">
                <div class="absolute inset-0 bg-gradient-to-br from-blue-700 via-indigo-800 to-purple-900 opacity-95"></div>
                <div class="absolute inset-0 opacity-10 pointer-events-none" style="background-image: url('data:image/svg+xml,%3Csvg width=\"20\" height=\"20\" viewBox=\"0 0 20 20\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cg fill=\"%23ffffff\" fill-opacity=\"1\" fill-rule=\"evenodd\"%3E%3Ccircle cx=\"3\" cy=\"3\" r=\"3\"/%3E%3C/g%3E%3C/svg%3E');"></div>
                
                <div class="relative z-10 flex flex-col items-center">
                    <div class="w-28 h-28 rounded-full border-4 border-white/30 shadow-2xl overflow-hidden mb-4 group transition-all duration-500 hover:border-white/60 flex items-center justify-center">
                        {% if profile.photo and 'default' not in profile.photo.name %}
                            <img src="{{ profile.photo.url }}" alt="Profile" class="w-full h-full object-cover transition-transform duration-700 group-hover:scale-110">
                        {% else %}
                            <i class="fas fa-user-circle text-6xl text-white/80"></i>
                        {% endif %}
                    </div>
                    <h1 class="text-3xl font-black tracking-tight mb-1">{{ user.get_full_name|default:user.username }}</h1>
                    <p class="text-indigo-100 font-medium text-sm opacity-80">{{ user.email }}</p>
                </div>
            </div>

            <div class="p-8 md:p-12">
                <!-- Completeness Alert -->
                {% if not profile.is_complete %}
                <div class="alert-premium mb-10 flex items-start gap-4 p-5 rounded-2xl bg-amber-50 border border-amber-200 group">
                    <div class="flex-shrink-0 w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center text-amber-600 transition-transform group-hover:rotate-12">
                        <i class="fas fa-exclamation-triangle text-xl"></i>
                    </div>
                    <div>
                        <h4 class="font-black text-amber-900 text-sm mb-1 uppercase tracking-tight">Tu perfil está incompleto</h4>
                        <p class="text-amber-800 text-sm leading-relaxed">Faltan datos críticos para poder procesar tus pedidos. Por favor, asegúrate de completar tu <strong>DNI, Teléfono y Dirección de Envío</strong>.</p>
                        <a href="{% url 'shop:profile_edit' %}" class="inline-block mt-3 text-amber-900 font-black text-xs uppercase underline tracking-widest hover:text-amber-700">Completar ahora →</a>
                    </div>
                </div>
                {% endif %}

                <div class="grid md:grid-cols-2 gap-12">
                    <!-- Left: Personal -->
                    <div class="space-y-8">
                        <div class="section-box">
                            <h2 class="premium-title"><i class="far fa-id-card mr-3 text-blue-600"></i>Identidad</h2>
                            <div class="grid gap-6 mt-6">
                                <div class="data-item">
                                    <span class="data-label">Nombre de Usuario</span>
                                    <p class="data-value">{{ user.username }}</p>
                                </div>
                                <div class="data-item">
                                    <span class="data-label">Documento (DNI)</span>
                                    <p class="data-value">{{ profile.dni|default:"Pendiente de registro" }}</p>
                                </div>
                                <div class="data-item">
                                    <span class="data-label">Fecha de Nacimiento</span>
                                    <p class="data-value">{{ profile.birthdate|date:"d M, Y"|default:"No especificado" }}</p>
                                </div>
                                <div class="data-item">
                                    <span class="data-label">Contacto</span>
                                    <p class="data-value">{{ profile.phone_number|default:"Sin teléfono" }}</p>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Right: Shipping -->
                    <div class="space-y-8">
                        <div class="section-box">
                            <h2 class="premium-title"><i class="fas fa-shipping-fast mr-3 text-blue-600"></i>Logística</h2>
                            <div class="grid gap-6 mt-6">
                                <div class="data-item">
                                    <span class="data-label">Dirección Principal</span>
                                    <p class="data-value leading-snug">{{ profile.shipping_address1|default:"No registrada" }}</p>
                                </div>
                                <div class="data-item">
                                    <span class="data-label">Punto de Referencia</span>
                                    <p class="data-value leading-snug italic text-gray-500">{{ profile.reference|default:"Sin referencia" }}</p>
                                </div>
                                <div class="data-item border-t border-gray-100 pt-4">
                                    <span class="data-label block mb-2">Ubicación Geográfica</span>
                                    <div class="flex flex-wrap gap-2">
                                        <span class="geo-badge">{{ profile.shipping_department|default:"DEP" }}</span>
                                        <span class="geo-badge">{{ profile.shipping_province|default:"PROV" }}</span>
                                        <span class="geo-badge bg-blue-600 text-white">{{ profile.shipping_district|default:"DIST" }}</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Footer Actions -->
                <div class="mt-12 pt-8 border-t border-gray-100 flex flex-col md:flex-row items-center justify-between gap-6">
                    <a href="{% url 'shop:home' %}" class="text-gray-400 hover:text-gray-600 font-bold text-sm transition-colors flex items-center gap-2">
                        <i class="fas fa-arrow-left"></i> Volver a la tienda
                    </a>
                    <div class="flex gap-4 w-full md:w-auto">
                        <a href="{% url 'shop:profile_edit' %}" class="flex-1 md:flex-none px-8 py-4 bg-blue-600 hover:bg-blue-700 text-white font-black rounded-2xl shadow-xl shadow-blue-200 transition-all hover:-translate-y-1 active:scale-95 text-center flex items-center justify-center gap-2 uppercase tracking-widest text-xs">
                            <i class="fas fa-user-edit"></i> Editar Información
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
    .profile-body {
        font-family: 'Inter', system-ui, -apple-system, sans-serif;
    }

    .glass-card {
        background: #ffffff;
        border-radius: 2.5rem;
        box-shadow: 0 40px 80px -20px rgba(0, 0, 0, 0.1);
    }

    .premium-title {
        font-size: 0.875rem;
        font-weight: 900;
        text-transform: uppercase;
        letter-spacing: 0.1em;
        color: #0f172a;
        display: flex;
        align-items: center;
    }

    .data-item {
        position: relative;
    }

    .data-label {
        font-size: 0.7rem;
        font-weight: 700;
        color: #94a3b8;
        text-transform: uppercase;
        letter-spacing: 0.05em;
        display: block;
        margin-bottom: 0.25rem;
    }

    .data-value {
        font-size: 1rem;
        font-weight: 600;
        color: #1e293b;
    }

    .geo-badge {
        padding: 0.4rem 0.8rem;
        background: #f1f5f9;
        color: #475569;
        font-size: 0.7rem;
        font-weight: 800;
        border-radius: 0.75rem;
        text-transform: uppercase;
    }

    .section-box {
        background: #f8fafc;
        padding: 2rem;
        border-radius: 1.5rem;
        border: 1px solid #f1f5f9;
        transition: all 0.3s ease;
    }

    .section-box:hover {
        background: #fff;
        border-color: #e2e8f0;
        box-shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.05);
        transform: translateY(-2px);
    }

    /* Animation */
    @keyframes fadeInScale {
        from { opacity: 0; transform: scale(0.98) translateY(10px); }
        to { opacity: 1; transform: scale(1) translateY(0); }
    }
    .glass-card {
        animation: fadeInScale 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;
    }
</style>
{% endblock %}
